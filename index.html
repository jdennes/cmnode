<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>cmnode</title>
    <style type="text/css">body { font-family: Georgia; }</style>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript">
      $(document).ready(function() {
        var ws;
        function openSocket() {
          ws = new WebSocket("ws://127.0.0.1:8000/");
          ws.onmessage = function(evt) { 
            var data = JSON.parse(evt.data);
            $("#messages").prepend("<div>" + data.Message + "</div>");
            $("h4#campaign").html("Campaign: " + data.CampaignName + " (" + data.CampaignSubject + ")");
          };
          ws.onclose = function() {};
          ws.onopen = function() {};
        }
        openSocket();
      });
    </script>
  </head>
  <body>
    <h3>Monitoring a campaign in realtime...</h3>
    <h4 id="campaign"></h4>
    <div>-------------------</div>
    <div id="messages" style="width: 100%; height: 100%;"></div>
  </body>
</html>
